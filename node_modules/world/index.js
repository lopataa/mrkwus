var names = require('./names'),
    zones = require('./zones'),
    exec  = require('child_process').exec;

exports.get_name = function(cb){

  var code = exports.get_code_from_timezone(function(err, code){
    if (err) return cb(err);

    cb(null, names[code]);

  });
}

exports.get_code_from_locale = function(){

  var lang = process.env.LANG;
  if (!lang) return;

  var code = lang.match(/_(\w\w)\./);
  if (code) return code[1];

}

exports.get_code_from_timezone = function(cb){

  exec('cat /etc/timezone', function(err, out){
    if (err) return cb(err);

    cb(null, zones[out.toString().trim()])
  })

}
